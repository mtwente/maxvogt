<!-- load DataTables with jquery bundled -->
<script
  type="text/javascript"
  language="javascript"
  src="{{ '/assets/lib/datatables/datatables.min.js' | relative_url }}"
></script>

<script>
  $(document).ready(function() {
    $('#zotero-table').DataTable({
      ajax: {
        url: 'https://api.zotero.org/groups/5400359/items/',
        dataSrc: ''
      },
      columns: [
        { data: 'data.title' },
        {
          data: 'data.creators',
          render: function(data) {
            return data.map(creator => creator.lastName).join(', ');
          }
        },
        { data: 'data.date' },
        { data: 'data.itemType' },
        {
          data: 'links.self.href',
          render: function(data) {
            return `<a href="${data}" target="_blank">View</a>`;
          }
        }
      ],
      paging: true,
      lengthMenu: [[25, 50, 100, -1], [25, 50, 100, "âˆž"]],
      dom: 'B<"row mt-2"<"col-md-6"l><"col-md-6"f>>t<"row"<"col-md-6"i><"col-md-6"p>>',
      buttons: [
        {
          extend: 'collection',
          text: 'Export',
          className: 'btn btn-outline-primary',
          buttons: [
            { text: 'Excel', extend: 'excelHtml5', className: 'btn btn-outline-primary' },
            { text: 'CSV', extend: 'csvHtml5', className: 'btn btn-outline-primary' }
          ]
        }
      ],
      order: [[2, 'desc']]
    });
  });
</script>
